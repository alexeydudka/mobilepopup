!function(a){var b={ajax:"",html:"",targetblock:"",width:"",height:"",closehtml:'<a href="" class="button-close close"></a>',loadinghtml:'<div class="loader-wrap"><div class="loader"><span></span><span></span><span></span></div></div>',customclass:"",onloaded:function(a){return!0},onclosed:function(a){return!0},onformsubmited:function(a,b){return!0}},c=b,d="mobilepopup",e="mobilepopup-overflow",f="mobilepopup-outer",g="mobilepopup-inner",h=0,i=a(window);popupblock=popupoverflow=popupouter=popupinner="";var j={init:function(d){var e={};c=a.extend(e,b,d),h=a("body").scrollTop(),k(),l(),m(),popupblock.addClass("open"),a("body").addClass("mobilepopup-opened"),a(document).width()<=767&&a("body").scrollTop(0)},reload:function(b){c=a.extend(c,b),popupblock.attr("class",d+" "+c.customclass+" open loading"),l(),m()},resize:function(b){c=a.extend(c,b),l()},close:function(){popupblock.removeClass("open"),a("body").removeClass("mobilepopup-opened"),a(document).width()<=767&&a("body").scrollTop(h),popupinner.html(""),c.onclosed(popupblock)}},k=function(){0==a("."+d).length&&(a("body").append("<div class='"+d+" "+c.customclass+" disabled-animation-in-child loading'><div class='"+e+"'></div><div class='"+f+"'><div class='"+g+"'></div>"+c.closehtml+c.loadinghtml+"</div></div>"),popupblock=a("."+d),popupoverflow=a("."+e),popupinner=a("."+g),popupouter=a("."+f),o())},l=function(){var b="";""!=a.trim(c.width)&&(b+="width:"+c.width+";"),""!=a.trim(c.height)&&(b+="height:"+c.height+";"),popupouter.attr("style",b),n()},m=function(){""!=a.trim(c.ajax)&&a.post(c.ajax,function(a){popupinner.html(a),popupblock.removeClass("loading"),c.onloaded(popupblock)}),""==a.trim(c.html)&&""==a.trim(c.targetblock)||(popupinner.html(""!=a.trim(c.html)?c.html:a(c.targetblock).find(">*").clone()),popupblock.removeClass("loading"),c.onloaded(popupblock))},n=function(){popupouter.css({"max-width":i.innerWidth()+"px","max-height":i.innerHeight()+"px"})},o=function(){popupoverflow.on("click",function(){return j.close(),!1}),popupblock.on("click",".close",function(){return j.close(),!1}),popupblock.on("click",".submit-popup-form",function(){var b=popupblock.find(".popup-form");return popupblock.addClass("loading"),a.post(b.attr("action")+"?"+b.serialize(),function(a){c.onformsubmited(a,popupblock),popupblock.removeClass("loading")}),!1}),i.on("orientationchange resize",function(){n()})};a.mobilepopup=function(b,c){return j[b]?j[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" not found for mobilepopup"):j.init.apply(this,arguments)}}(jQuery);